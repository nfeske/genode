

              ===============================================
              Release notes for the Genode OS Framework 17.11
              ===============================================

                               Genode Labs



; intro
; @nfeske
; Package management
; state of packaged components
; mention sculpt as motivation

commit c6690ea447c9317a16d253be4ec04824943d7c5b
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Wed Sep 6 19:15:36 2017 +0200

    ports: use depot in noux_vim.run, noux_bash.run




Base framework and OS-level infrastructure
##########################################

Virtual file system and C runtime
=================================

; @chelmuth

commit 488396e78b93f204b8c819c412d71787b575e4b3
Author: Emery Hemingway <emery@vfemail.net>
Date:   Tue Sep 5 15:13:27 2017 -0500

    server/vfs: status completes or throw Invalid_handle
    
    The 'status' RPC method of the File_system session must complete
    successfully or throw 'Invalid_handle' for any error.
    
    Ref #2512

commit 8ca63d4a6e5281ba0d7fa591bc52b4a495a54ee9
Author: Emery Hemingway <emery@vfemail.net>
Date:   Thu Sep 14 14:00:36 2017 -0500

    libc: reintegrate libc_resolv library
    
    Remove getaddrinfo and freeaddrinfo from the Libc::Plugin and get rid of
    the extra libc_resolv library. Remove getaddrinfo/freeaddrinfo symbol
    hiding patch for FreeBSD sources. Remove libc_resolv from Makefiles and
    run scenarios.
    
    Fix #2273

commit 226fcbc02fa2e9fe36c81be3ea530f41efea2f7a
Author: Emery Hemingway <emery@vfemail.net>
Date:   Thu Sep 28 10:43:30 2017 -0500

    Remove remote shell support from libc
    
    The remote shell facilities are past deprecation and there is an
    obligation to prevent their use rather than to support them. This patch
    removes the related function definitions from 'unistd.h', which have not
    been been included in the Genode libc ABI regardless.
    
    Fix #2530


NIC-router improvements
=======================

The NIC router has received two minor improvements regarding MAC addresses and
ARP handling and one new mayor feature in that it now has the ability to act
as DHCP server or client at domains.

Let's first have a look at the minor changes. The MAC addresses that the NIC
router allocates for its NIC clients are now of the correct type "local" and
"individual". And the NIC router now also considers ARP requests for foreign
IP addresses coming from a domain. If there is no gateway configured for the
domain, the NIC router itself jumps in as gateway and answers those requests
with its IP address. Thus, if you have an individual gateway in a subnet
behind the NIC router, make sure to have the gateway attribute in the
according <domain> tag set.

The new DHCP server functionality is activated for a domain by the new
<dhcp-server> sub-tag of the <domain> tag:

<domain name="vbox" interface="10.0.1.1/24">
    <dhcp-server ip_first="10.0.1.80"
                 ip_last="10.0.1.100"
                 ip_lease_time_sec="3600"
                 dns_server="10.0.0.2"/>
    ...
</domain>

With the attributes ip_first and ip_last the available IPv4 address range is
defined. The lifetime of an IPv4 address assignment is set in seconds through
the ip_lease_time_sec attribute. The dns_server attribute is optional. It
declares which IPv4 address the NIC router shall state in the DNS-server
option of his DHCP reply packets. The DNS server might also be of a foreign
subnet.

As DHCP server, the NIC router provides the following DHCP options to its
clients:

* Message type,
* server IP (set to the NIC routers IP),
* subnet mask,
* IP lease time,
* router IP (set to the NIC routers IP),
* DNS server (if configured),
* and broadcast address.

If you want the NIC router to act as DHCP client at a domain, simply
leave out the interface attribute in the <domain> tag. Then, the router tries
to dynamically receive and maintain an IP configuration for that domain.
Make sure that your DHCP server provides these DHCP option fields to the NIC
router:

* Message type,
* server IP,
* subnet mask,
* IP lease time,
* and router IP.

Note also, that the NIC router drops all packets not related to its DHCP
client functionality at a domain that (currently) has no IP configuration.
As soon as the domain achieves to get a valid IP configuration, the router
switches to the normal behavior.


New driver-manager subsystem
============================

In traditional Genode system scenarios, the selection and configuration of the
used device drivers are defined at system-integration time. This approach
works fine whenever the hardware platform targeted by a given scenario and the
use case of the scenario is well known in advance. But it does not scale up to
general-purpose computing where one system image must be usable on diverse
machines, and the concrete use cases are up to the end user.

The new _driver-manager_ subsystem composes existing Genode components within
a dynamic subsystem that spawns and configures device drivers that are
fundamental for an interactive system on demand. It provides the following
feature set:

* It contains the ACPI-discovery component and the platform driver.

* It hosts and automatically configures the USB driver such that USB storage
  and vendor-specific devices become available to user-specific driver
  components residing outside the drivers subsystem (e.g., a VirtualBox
  instance that drives an individual USB stick). The list of present USB
  devices and the current USB-driver configuration are provided as a
  'usb_devices' and 'usb_drv.config' report respectively.

* It spawns the AHCI driver and produces a list of present devices as a
  'block_devices' report.

* It hosts a PS/2 driver as well as an input-filter that incorporates the
  input-event streams originating from the PS/2 and USB HID drivers. The
  default configuration generates character events based on a configurable
  keyboard layout and repeat, and includes scroll-wheel emulation and pointer
  acceleration for a PS/2 mouse (or, more importantly, the trackpoint of
  Lenovo laptops),

* It responds to changes of the 'capslock' and 'numlock' states, which are
  managed by the outside of the drivers subsystem. Both states are consumed
  by the USB and PS/2 drivers to driver the keyboard-indicator LEDs. The
  'numlock' state is furthermore used to toggle key remappings performed by
  the input filter. The 'capslock' state is incorporated into the modifier
  state as processed by the input-filter's character generator.

The new subsystem comes in the form of a depot package, which depends on all
requires components. Internally, it employs a dynamic init instance as a tool
to start and manage driver components on demand. The actual management
component is a simple program of about 500 lines of code that merely consumes
reports and produces configurations. It is so simple that it does not even
perform any dynamic memory allocation.

The new subsystem is present in the _gems_ repository and illustrated by the
_gems/run/driver_manager.run_ script. It is also used as one cornerstone of
the forthcoming general-purpose "sculpt" scenario mentioned in the
introduction.


Configuration changes of acpica and platform driver
===================================================

; @alex-ab

commit c8bea156b6f036ae5948d8ba7cab65bd8b0d8247
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Fri Nov 10 15:21:18 2017 +0100

    acpica: request 'Acpi' only if 'acpi_ready="yes"'
    
    The synchronization with the ACPI driver is not needed when starting
    acpica at a later stage. It could already be disabled via the
    'acpi_ready="yes"' config attribute. However, acpica still
    unconditionally requests the so-called "Acpi" service, which is an
    alias for the platform_drv's "Platform" service. This patch disables the
    use of this alias when the 'acpi_ready' synchronization is disabled.

commit 3dcf2d6c600ecf273dcbeb62d80c5780bea55f1f
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Fri Nov 17 14:45:50 2017 +0100

    platform_drv: separate acpi and system feature


New ROM-filter abilities
========================

The ROM-filter components is able to transform XML data from multiple ROM
modules into a new ROM module. It is prominently used to generate component
configurations depending on global system state. The current release makes
this tool more flexible by allowing verbatim copies of input content into
the output XML node as well as the use of input content as attribute values.


New user-input processing capabilities
======================================

In [https://genode.org/documentation/release-notes/17.02#Input-event_filter - version 17.02],
we introduced a modular input-processing component called _input-filter_.
The current release adds the following features to this component:

:incorporating modifier state from external ROMs:

  By adding a '<rom name="...">' node into '<modN>' node of a chargen-filter,
  it is now possible to incorporate the content of the given ROM module into
  the modifier state. If the ROM module contains a top-level node with the
  attribute 'enabled' set to "yes", the modifier is enabled. This is useful
  for handling a system-global capslock state.

:scroll-wheel emulation:

  The new '<button-scroll>' filter turns relative motion events into wheel
  events while a special button (i.e., the middle mouse button) is pressed.
  The button and rate of generated wheel events can be configured per axis via
  the sub nodes '<vertical>' and '<horizontal>'. The button of each axis can
  be specified via the 'button' attribute. By default, "BTN_MIDDLE" is used.
  The rate of generated wheel events can be defined by the 'speed_percent'
  attribute. A value of "100" uses relative motion vectors directly as wheel
  motion vectors. In practice, this is results in overly fast wheel motion. By
  lowering the value, the rate can be reduced to practical levels. By
  specifying a negative value, the direction of the generated wheel motion can
  be inverted.

  The consumed relative motion events are filtered out from the event stream
  such that pointer movements are inhibited while the wheel emulation is
  active. All other events are passed along unmodified.

:pointer acceleration:

  The new '<accelerate>' filter applies acceleration to relative motion
  values. The 'max' attribute defines the maximum value added to the incoming
  motion values. The 'sensitivity_percent' attribute scales incoming motion
  values before applying the (potentially non-linear) acceleration function.
  The 'curve' attribute defines the degree of non-linearity of the
  acceleration. The value "0" corresponds to a linear function whereas the
  maximum value "255" applies a curved function. The default value is "127".


Keyboard-LED support for PS/2 and USB HID
=========================================

Both the PS/2 and the USB drivers have gained the new '<config>' attributes
'capslock_led="no"', 'numlock_led="no"', and 'scrlock_led="no"' (with their
default values shown). The attributes can have the values "no" (LED is turned
off), "yes" (LED is turned on), or "rom". In the latter case, the driver reads
the LED state from a dedicated ROM module called "capslock", "numlock", or
"scrlock" respectively. The ROM module is expected to have a top-level XML
node with the attribute 'enabled' set to "yes" or "no". The drivers reflect
this state information by driving the corresponding keyboard-mode indicator
LEDs.


Revised nitpicker GUI server
============================

Driven by use cases like the "sculpt" scenario mentioned in the introduction,
the nitpicker GUI server and its helper components received an overhaul.

Besides modernizing the implementation according to our today's best
practices, we succeeded in removing the focus handling as the last remaining
builtin policy from the GUI server to an external component, thereby making
the GUI server much more flexible. This line of work is complemented with
an improved way of supporting client-provided pointer shapes, and a new
general component for handling global keys.


Supplementing user-activity information to the hover report
-----------------------------------------------------------

Nitpicker's existing "hover" report features the information of the
currently hovered client (e.g., the client's label and domain). In the
new version, the report also features the information whether or not the
user has actively moved the pointer during the last half second. This is
analogously to how the "focus" report features user-activity information
about recent key press/release activity. When combined the "hover" and "focus"
reports provide a way to detect the absence of user activity, e.g., to
implement a lock screen or screen saver. If both reports have no 'active'
attribute, such a component can schedule a timer. Whenever either of both
reports shows an 'active' attribute, the timer is reset. The lock screen
becomes active once the timeout triggers.


Key-state reporting
-------------------

For debugging purposes or for implementing global key combinations,
nitpicker now offers "keystate" reports. The report is update each time,
the user presses or releases a key. It list all currently pressed keys
along with the key count as observed by nitpicker.


Report last clicked-on client
-----------------------------

The new 'clicked' report features the information about the client, on which
the user actively clicked. It is useful to implement a click-to-focus policy
outside of nitpicker.


Externalizing nitpicker's focus policy
--------------------------------------

Traditionally, nitpicker had a builtin policy about the input focus, which
ensured that only the user can change the focus. The input focus is changed
whenever the user clicks on an unfocused view. If permitted by the policy of
the domain, the clicked-on client receives the focus. The policy configuration
allows one to define domains that never receive any focus, domains that
receive the focus only temporarily while the button is kept pressed (the
so-called "transient focus"), or domains that can receive the regular input
focus.

However, there are situations where this builtin policy stands in the way.
For example, in a scenario based on virtual consoles, the user wants to
be able to switch virtual consoles via keyboard shortcuts and expects the
input focus to match the currently visible console. Another example is the
change of the input focus via key combinations like alt-tab.

As an alternative to the builtin policy, the new version of nitpicker is
able to respond to an externally provided "focus" state in the form of
a ROM session. This state is driven by a dedicated component, like the
new _nit_focus_ component that implements the traditional click-to-focus
policy. By supplying the focus as a ROM session to nitpicker, it become
easy to globally override the focus if needed. One particular example is
a lock screen that should capture the focus when becoming active, or
yield the focus to the original owner when becoming inactive.

The new explicit focus handling can be activated by setting the '<config>'
attribute 'focus' to the value "rom". Further down the road, we plan to
make this option the default, with the goal to ultimately remove the
original builtin policy.


Generalized global-key handling
-------------------------------

The new _global_keys_handler_ component replaces the former _xray-trigger_
component. It transforms a stream of nitpicker input events to state reports.
The states and the ways of how the user input affects the states is
configurable. Examples for such states are the system-global capslock and
numlock states, or the nitpicker X-ray mode activated by a global
secure-attention key. The configuration looks as follows:

! <config>
!   <bool name="xray" initial="no"/>
!
!   <press   name="KEY_F1" bool="xray" change="on"/>
!   <release name="KEY_F1" bool="xray" change="off"/>
!   <press   name="KEY_F2" bool="xray" change="toggle"/>
!
!   <report name="xray" delay_ms="125">
!     <hovered domain="panel"/>
!     <bool name="xray"/>
!   </report>
! </config>

A '<bool>' node declares a boolean state variable with the given name and its
initial value (default is "no"). There may by any number of such variables.

The '<press>' and '<release>' nodes define how key events affect the state
variables. Each of those nodes refers to a specific state variable via the
'bool' attribute, and the operation as the 'change' attribute. Possible
'change' attribute values are "on", "off", and "toggle".

The '<report>' node defines a state-dependent report with the name as
specified in the 'name' attribute. The report-generation rate can be
artificially limited by the 'delay_ms' attribute. If specified, the report is
not issued immediately on a state change but after the specified amount of
milliseconds. The '<report>' node contains a number of conditions. Whenever
one of those conditions is true, a report of the following form is generated:

! <xray enabled="yes"/>

Otherwise, the report's 'enabled' attribute has the value "no". Possible
conditions are '<bool>' and '<hovered>'. The '<bool>' condition is true if the
named boolean state variable has the value true. The '<hovered>' condition is
true if the currently hovered nitpicker client belongs to the domain as
specified in the 'domain' attribute. The latter information is obtained from a
ROM module named "hover", which corresponds to nitpicker's hover reports.

To use the global-keys-handler in practice, one needs to configure the
nitpicker GUI server such that the press/release events of the global keys of
interest are routed to the global-keys-handler. This can be achieved by
nitpicker's '<global-key>' configuration nodes. For example:

! <global-key name="KEY_F1" label="global_keys_handler -> input" />
! <global-key name="KEY_F2" label="global_keys_handler -> input" />


More flexible geometry definitions of nit_fb instances
------------------------------------------------------

The _nit_fb_ component translates the nitpicker session interface into the
low-level input and framebuffer session interfaces such that raw framebuffer
clients can be hosted as nitpicker applications. The position and size of such
an application is configurable.

The new 'origin' attribute denotes the coordinate origin of the values
specified in the 'xpos' and 'ypos' attributes. Supported origins are
"top_left", "top_right", "bottom_left", and "bottom_right". This attribute
allows one to align the nitpicker view at any of the four screen boundaries.

The 'width' and 'height' attribute values can now be negative. If so, they are
relative to the physical screen size. E.g., when using a screen size of
640x480, the effective width for a 'width' attribute value of "-100" would be
640 - 100 = 540.


Simplified handling of client-provided pointer shapes
-----------------------------------------------------

The _pointer_ component that accompanies nitpicker by default shows a static
pointer shape only. In advanced scenarios, for example when multiple instances
of VirtualBox are present on one screen, it is desired to show the shape
provided by the currently hovered guest OS. This was accomplished by a
special _vbox_pointer_ component with access to both, the client-provided
shapes and nitpicker's hover report. Whereas this component sufficed for the
relatively static scenarios, the pointer's policy configuration becomes rather
difficult in dynamic scenarios where the labels of the displayed VMs or
applications are unknown at system-integration time.

The new version simplifies the shape handling by letting the pointer component
play the role of a "Report" service that consumes "shape" reports. This way,
the pointer implicitly knowns the label of the shape-providing client. It
matches the labels of its report clients against the currently hovered client
as obtained from nitpicker's hover report. If there is a match, the pointer
displays the matching client-provided shape. Since the new component is
generically applicable, e.g., not only for VirtualBox-provided shapes but also
for Qt5-provided shapes, it has become nitpicker's default pointer component.


USB-driver support for RNDIS
============================

; @senier

commit 50ec5c03c1bf254f02a656c250d2a4d9b4f24405
Author: Alexander Senier <senier@componolit.com>
Date:   Mon Oct 16 21:47:40 2017 +0200

    dde_linux/usb: Support CDC Ethernet

commit f15e8fec8f71880930feb15d8bf7d812f73f108b
Author: Alexander Senier <senier@componolit.com>
Date:   Wed Oct 18 14:01:12 2017 +0200

    dde_linux/usb: Add RNDIS driver

; thanks to Alexander Senier


Refined Rump-kernel-based file-system support
=============================================

; @cnuke

commit 611df2e9732b01820f0ef334297e1eb1d6f6a15c
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Mon Oct 23 11:00:41 2017 +0200

    rump_fs: add support for session (un-)mounting
    
    Issue #2558.

commit 52139cb6cdadb7ffebe1dd673dc61aef01f56cf3
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Thu Nov 2 11:51:58 2017 +0100

    rump_fs: try to mount the fs on startup
    
    By now the file system gets mounted and unmounted on demand (whenever
    the first clients comes along and whenever the last client leaves).
    As a precaution we now also try to mount and unmounted the file system
    in the init phase to prevent the first client from failing to its own
    surprise.
    
    Issue #2558.

commit 29346f0cc3f97247d61ea33620a0b4183584b3be
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Thu Oct 26 16:09:09 2017 +0200

    libports: initial e2fsck port
    
    In contrast to the already available e2fsprogs port, this one does not
    depend on Noux.
    
    Issue #2558.


Runtime environments and programming languages
##############################################

Genode components based on the Nim language
===========================================

; @emery

commit b20b14de2721c3bb8b6781b2d6e3f210879b64d5
Author: Emery Hemingway <emery@vfemail.net>
Date:   Wed Sep 6 09:43:48 2017 -0500

    support for Nim {.compile.} pragma for C sources
    
    Inject bundled C files into build recipes with the Nim {.compile.}
    pragma.
    
    Fix #2516

commit 419e7b99e4dc7fd62b9b3e05e4a6028d9192dc10
Author: Emery Hemingway <emery@vfemail.net>
Date:   Thu Sep 28 09:15:24 2017 -0500

    Enforce use of a custom Nim compiler
    
    Use a custom Nim compiler at '/usr/local/genode-nim' that can be built
    with a makefile at 'tool/tool_chain_nim'.
    
    Fix #2545


GDB-based debugging of server components
========================================

; @cproc

commit 0fd4649a7c5ed05d6d6ebc51be066735a8dc2a87
Author: Christian Prochaska <christian.prochaska@genode-labs.com>
Date:   Mon Nov 13 16:25:45 2017 +0100

    gdb_monitor: handle session requests for child services
    
    Fixes #2574


Capslock-state handling for VirtualBox5
=======================================

; @nfeske

commit e54ad5c73a36f44e3027ab598c06ff862d07523a
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Tue Nov 7 15:13:10 2017 +0100

    vbox: support capslock state provided by ROM
    
    Fixes #2568


Applications and libraries
##########################

Displaying of Qt5's custom pointer shapes
=========================================

; @cproc

commit 2c1acd8ee245b50e3eb3226826205c6d444a4cbb
Author: Christian Prochaska <christian.prochaska@genode-labs.com>
Date:   Fri Nov 24 20:23:45 2017 +0100

    qt5: pointer shape support
    
    Fixes #2586


Qt5-based virtual keyboard
==========================

; @chelmuth

commit b0187ddc28471bdad042d78c38bd5bf5019297ea
Author: Johannes Kliemann <jk@jkliemann.de>
Date:   Mon Aug 14 11:14:43 2017 +0200

    qt5: setup QPlatformInputContext on nitpicker
    
    Issue #2496
    Fixes #2495

commit 6cbf54aefb94fc85c26269ab85c2a93a79798897
Author: Johannes Kliemann <jk@jkliemann.de>
Date:   Wed Jul 26 14:46:22 2017 +0200

    qt5: example of qtvirtualkeyboard
    
    Fixes #2496

; thanks to Johannes Kliemann


Resizable libSDL-based applications like avplay
===============================================

; @cnuke

commit 6ce66974e4ee1df69cb0d326427732ceb7851946
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Fri Nov 17 13:03:22 2017 +0100

    sdl: remove deprecated API usage
    
    In addition framebuffer resizing is now also supported.
    
    Fixes #2583.

commit 165784d364a623bc3bbeafb7cd4a461be3ddce58
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Sat Nov 18 23:19:21 2017 +0100

    sdl: forcefully disable double-buffering
    
    Issue #2583.

commit 9d6827d26abb32a6b6c9f2763e8a1fdd6991837f
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Fri Nov 17 13:07:19 2017 +0100

    test/sdl: handle resizing
    
    Issue #2583.

commit 1438965bbc4e6c61b12533fb7adbd69ecf5cbb7d
Author: Josef Söntgen <josef.soentgen@genode-labs.com>
Date:   Thu Nov 16 16:08:23 2017 +0100

    avplay: limit requested video-mode
    
    In case the video geometry (WxH) is larger than the current size of
    the framebuffer, match its size and let libav do the scaling. This
    enables the playback of 1080p movies on smaller screens.
    
    Issue #2583.


Resizable PDF viewer based on mypdf
===================================

; @emery

commit 040e331f773604502faf466c7f01b1b06745a9b9
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Wed Jul 8 18:38:54 2015 +0200

    mupdf: support resizeable framebuffers

commit 979b6bccd441770add2bd9c33251c5313ffaace7
Author: Emery Hemingway <emery@vfemail.net>
Date:   Fri Nov 17 00:50:51 2017 -0600

    Rename app/mupdf to app/pdf_view, create depot recipes
    
    The name 'mupdf' is both the name of a library and a component, thus
    preventing a depot recipes for both the shared library and component.
    
    Fix #2582


Platforms
#########

UEFI boot, consistent use of GRUB2 on x86
=========================================

; @alex-ab

commit 5f1815e1d9438d815395ba5dd51af74409aa6cca
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Wed Sep 20 22:56:00 2017 +0200

    tool: use grub2 instead of grub1 for iso boot
    
    Fixes #2526

commit 8b21e0e16d73578bfa6964748e6834517d2d279c
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Tue Nov 14 09:10:37 2017 +0100

    bender: fix free memory calculation for Multiboot2
    
    Fixes #2487


Enabling MMU-based threat mitigations by default
================================================

; @alex-ab

commit db0589727af61f77228528e3827b85d5b8370b18
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Wed Oct 18 14:58:15 2017 +0200

    seoul: attach executable memory as such
    
    Issue #1723

commit c4c9e1fe7fbc01ac9233b25455b234d59f60060e
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Wed Oct 18 14:58:36 2017 +0200

    vbox: attach executable memory as such
    
    Issue #1723

commit e6dcdcf2779466afe987b3c0b63cee179e9085e2
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Wed Oct 18 16:32:17 2017 +0200

    base: attach executable memory as such
    
    - tracing policy
    
    Issue #1723

commit dfa8b787beed9fe5323c34a80426f4957e6d3f1a
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Fri Oct 20 11:43:57 2017 +0200

    noux: attach executable memory as such
    
    Issue #1723

commit e87b322616c427e08806d67b89589baabe51776c
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Wed Oct 18 14:14:07 2017 +0200

    libc: support executable memory allocations
    
    in internal memory allocator used by libc and vbox*
    
    Issue #1723

commit d18262da1f51ca933c774809f1a78e1e75ee0ee1
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Wed Oct 18 14:20:49 2017 +0200

    libc: add mempool for rwx memory
    
    Issue #1723

commit e3d9f414964d458d126b2f24101d4ba51f643d45
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Fri Oct 13 11:42:56 2017 +0200

    base: provide dst fault address for write fault
    
    Issue #1723

commit 03b8e70d3f7f920ad3531e1a4271645b0c9a7d7f
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Thu Oct 12 14:33:04 2017 +0200

    rm_fault: add fault test for exec access violation
    
    Issue #1723

commit db329b02b51b608217079a216fd86faf936bd152
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Fri Oct 13 15:26:33 2017 +0200

    base: enable executable memory fault handling
    
    Fixes #1723

commit f2c3225ab613f849fc68b3489e03f60fcebe456e
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Fri Oct 13 14:18:29 2017 +0200

    nova: enable nx bit handling for x86_64
    
    Issue #1723

commit 8ea584b1d2078753c722911d101cede7da44ff08
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Fri Oct 13 14:26:09 2017 +0200

    foc: enable nx bit handling for x86_64 and arm
    
    Issue #1723

commit aa1d5a7dd1b60756a49161002437ed092d7f68a8
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Fri Oct 13 16:23:10 2017 +0200

    hw: enable nx bit handling for x86_64
    
    Issue #1723

commit 4dd5e6b266fbb8a312af5db97a82a6a6491882c6
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Tue Oct 17 11:36:10 2017 +0200

    hw: enable nx bit handling for arm

commit 9655ebbefe95066997eabe0a33b55503cedcd6c4
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Tue Oct 17 11:51:13 2017 +0200

    sel4: enable nx bit handling for ARM
    
    Issue #1723

commit 26eb0ce7946f62942176b33519a8f49f41016882
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Thu Oct 19 13:26:49 2017 +0200

    nova: use kernel with enabled SMAP feature
    
    Issue #1723


Updated seL4 to kernel branch 7.0
=================================

; @alex-ab

commit e8200e797733d2ba2ad6922cc90866031a17d3e8
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Fri Sep 1 13:24:43 2017 +0200

    sel4: use kernel branch 7.0 + our mastered commits
    
    for uefi, multiboot2, benchmark interface adaptations and ARM define build
    fixes.
    
    Issue #2562

commit 4b9859e162464ea630cd1e3b89b3076b99730d34
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Thu Nov 9 22:20:07 2017 +0100

    sel4: enable support for direct unmap in core
    
    Issue #2563

commit e006f8629c5810ad7cc9f5145a23a907ca03f100
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Sat Nov 18 14:17:11 2017 +0100

    sel4: add mbi2 framebuffer support
    
    Issue #2555


Execution on bare hardware (base-hw)
====================================

; @skalk

commit 42db1e112bccdc5797100411f7da97d46eca4f86
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Tue Jun 20 15:25:04 2017 +0200

    hw: introduce kernel/user address space split
    
    * introduces central memory map for core/kernel
    * on 32-bit platforms the kernel/core starts at 0x80000000
    * on 64-bit platforms the kernel/core starts at 0xffffffc000000000
    * mark kernel/core mappings as global ones (tagged TLB)
    * move the exception vector to begin of core's binary,
      thereby bootstrap knows from where to map it appropriately
    * do not map boot modules into core anymore
    * constrain core's virtual heap memory area
    * differentiate in between user's and core's main thread's UTCB,
      which now resides inside the kernel segment
    
    Ref #2091

commit 7e47fa58b325fcf1752fd1a4cfc4c0169ef42fcf
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Wed Aug 30 11:34:21 2017 +0200

    hw: use x86 exception stack unconditionally
    
    Always switch to the "exception stack" instead of having a hardware initiated
    stack switch during exceptions/interrupts when the privilege level changes only.
    Moreover, this commit increases the exception stack slightly.
    
    Ref #2091

commit ca60e24ad98648e140e0550e4da32f2119bf6810
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Wed Aug 30 11:59:35 2017 +0200

    hw: run core threads in privileged mode
    
    * introduce new syscall (core-only) to create privileged threads
    * take the privilege level of the thread into account
      when doing a context switch
    * map kernel segment as accessable for privileged code only
    
    Ref #2091

commit 4e97a6511b9b20846cf6afc4007791d998d6c8f6
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Fri Jun 30 12:00:27 2017 +0200

    hw: switch page-tables only when necessary
    
    * Instead of always re-load page-tables when a thread context is switched
      only do this when another user PD's thread is the next target,
      core-threads are always executed within the last PD's page-table set
    * remove the concept of the mode transition
    * instead map the exception vector once in bootstrap code into kernel's
      memory segment
    * when a new page directory is constructed for a user PD, copy over the
      top-level kernel segment entries on RISCV and X86, on ARM we use a designated
      page directory register for the kernel segment
    * transfer the current CPU id from bootstrap to core/kernel in a register
      to ease first stack address calculation
    * align cpu context member of threads and vms, because of x86 constraints
      regarding the stack-pointer loading
    * introduce Align_at template for members with alignment constraints
    * let the x86 hardware do part of the context saving in ISS, by passing
      the thread context into the TSS before leaving to user-land
    * use one exception vector for all ARM platforms including Arm_v6
    
    Fix #2091

commit 0635d5fffb8d95a76f8490122aecc270d6e7c6be
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Thu Oct 5 16:11:24 2017 +0200

    hw: turn Cpu_idle into a Thread
    
    Fix #2539

commit 0f9801d1f03d6bfd37b8320641d0cf43e5c822ae
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Sat Nov 18 15:22:22 2017 +0100

    hw: evaluate also ACPI RSDP v1 with MBI2
    
    Issue #2526

commit a620561d6248749de5530be0734ec2aefe588f7d
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Sat Nov 18 15:53:02 2017 +0100

    hw: add mbi2 framebuffer support
    
    Issue #2555


Improved offline validation of Genode configurations
====================================================

; @alex-ab

commit be753ee863d7ab8246c213b6ad178077c4f770ff
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Tue Sep 5 23:05:43 2017 +0200

    tool: add genode xml schema to xmllint check
    
    Fixes #2513

