

              ===============================================
              Release notes for the Genode OS Framework 17.11
              ===============================================

                               Genode Labs



; intro
; @nfeske
; Package management
; state of packaged components
; mention sculpt as motivation

commit c6690ea447c9317a16d253be4ec04824943d7c5b
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Wed Sep 6 19:15:36 2017 +0200

    ports: use depot in noux_vim.run, noux_bash.run




Base framework and OS-level infrastructure
##########################################

Virtual file system and C runtime
=================================

; @chelmuth

commit 488396e78b93f204b8c819c412d71787b575e4b3
Author: Emery Hemingway <emery@vfemail.net>
Date:   Tue Sep 5 15:13:27 2017 -0500

    server/vfs: status completes or throw Invalid_handle
    
    The 'status' RPC method of the File_system session must complete
    successfully or throw 'Invalid_handle' for any error.
    
    Ref #2512

commit 8ca63d4a6e5281ba0d7fa591bc52b4a495a54ee9
Author: Emery Hemingway <emery@vfemail.net>
Date:   Thu Sep 14 14:00:36 2017 -0500

    libc: reintegrate libc_resolv library
    
    Remove getaddrinfo and freeaddrinfo from the Libc::Plugin and get rid of
    the extra libc_resolv library. Remove getaddrinfo/freeaddrinfo symbol
    hiding patch for FreeBSD sources. Remove libc_resolv from Makefiles and
    run scenarios.
    
    Fix #2273

commit 226fcbc02fa2e9fe36c81be3ea530f41efea2f7a
Author: Emery Hemingway <emery@vfemail.net>
Date:   Thu Sep 28 10:43:30 2017 -0500

    Remove remote shell support from libc
    
    The remote shell facilities are past deprecation and there is an
    obligation to prevent their use rather than to support them. This patch
    removes the related function definitions from 'unistd.h', which have not
    been been included in the Genode libc ABI regardless.
    
    Fix #2530


NIC-router improvements
=======================

The NIC router has received two minor improvements regarding MAC addresses and
ARP handling and one new mayor feature in that it now has the ability to act
as DHCP server or client at domains.

Let's first have a look at the minor changes. The MAC addresses that the NIC
router allocates for its NIC clients are now of the correct type "local" and
"individual". And the NIC router now also considers ARP requests for foreign
IP addresses coming from a domain. If there is no gateway configured for the
domain, the NIC router itself jumps in as gateway and answers those requests
with its IP address. Thus, if you have an individual gateway in a subnet
behind the NIC router, make sure to have the gateway attribute in the
according <domain> tag set.

The new DHCP server functionality is activated for a domain by the new
<dhcp-server> sub-tag of the <domain> tag:

<domain name="vbox" interface="10.0.1.1/24">
    <dhcp-server ip_first="10.0.1.80"
                 ip_last="10.0.1.100"
                 ip_lease_time_sec="3600"
                 dns_server="10.0.0.2"/>
    ...
</domain>

With the attributes ip_first and ip_last the available IPv4 address range is
defined. The lifetime of an IPv4 address assignment is set in seconds through
the ip_lease_time_sec attribute. The dns_server attribute is optional. It
declares which IPv4 address the NIC router shall state in the DNS-server
option of his DHCP reply packets. The DNS server might also be of a foreign
subnet.

As DHCP server, the NIC router provides the following DHCP options to its
clients:

* Message type,
* server IP (set to the NIC routers IP),
* subnet mask,
* IP lease time,
* router IP (set to the NIC routers IP),
* DNS server (if configured),
* and broadcast address.

If you want the NIC router to act as DHCP client at a domain, simply
leave out the interface attribute in the <domain> tag. Then, the router tries
to dynamically receive and maintain an IP configuration for that domain.
Make sure that your DHCP server provides these DHCP option fields to the NIC
router:

* Message type,
* server IP,
* subnet mask,
* IP lease time,
* and router IP.

Note also, that the NIC router drops all packets not related to its DHCP
client functionality at a domain that (currently) has no IP configuration.
As soon as the domain achieves to get a valid IP configuration, the router
switches to the normal behavior.


New driver-manager subsystem
============================

In traditional Genode system scenarios, the selection and configuration of the
used device drivers are defined at system-integration time. This approach
works fine whenever the hardware platform targeted by a given scenario and the
use case of the scenario is well known in advance. But it does not scale up to
general-purpose computing where one system image must be usable on diverse
machines, and the concrete use cases are up to the end user.

The new _driver-manager_ subsystem composes existing Genode components within
a dynamic subsystem that spawns and configures device drivers that are
fundamental for an interactive system on demand. It provides the following
feature set:

* It contains the ACPI-discovery component and the platform driver.

* It hosts and automatically configures the USB driver such that USB storage
  and vendor-specific devices become available to user-specific driver
  components residing outside the drivers subsystem (e.g., a VirtualBox
  instance that drives an individual USB stick). The list of present USB
  devices and the current USB-driver configuration are provided as a
  'usb_devices' and 'usb_drv.config' report respectively.

* It spawns the AHCI driver and produces a list of present devices as a
  'block_devices' report.

* It hosts a PS/2 driver as well as an input-filter that incorporates the
  input-event streams originating from the PS/2 and USB HID drivers. The
  default configuration generates character events based on a configurable
  keyboard layout and repeat, and includes scroll-wheel emulation and pointer
  acceleration for a PS/2 mouse (or, more importantly, the trackpoint of
  Lenovo laptops),

* It responds to changes of the 'capslock' and 'numlock' states, which are
  managed by the outside of the drivers subsystem. Both states are consumed
  by the USB and PS/2 drivers to driver the keyboard-indicator LEDs. The
  'numlock' state is furthermore used to toggle key remappings performed by
  the input filter. The 'capslock' state is incorporated into the modifier
  state as processed by the input-filter's character generator.

The new subsystem comes in the form of a depot package, which depends on all
requires components. Internally, it employs a dynamic init instance as a tool
to start and manage driver components on demand. The actual management
component is a simple program of about 500 lines of code that merely consumes
reports and produces configurations. It is so simple that it does not even
perform any dynamic memory allocation.

The new subsystem is present in the _gems_ repository and illustrated by the
_gems/run/driver_manager.run_ script. It is also used as one cornerstone of
the forthcoming general-purpose "sculpt" scenario mentioned in the
introduction.


Configuration changes of acpica and platform driver
===================================================

Up to now the acpica application was started in the most scenarios up-front to
provide exclusive access to all PCI devices during initialization. Afterwards
the platform driver took over the access and announced the platform service.
With the upcoming "sculpt" scenario the desire arose to start the acpica
application at a later stage, when the platform driver is already running.
We adjusted the acpica and platform driver configuration slightly to
cover this use-case also.

New ROM-filter abilities
========================

The ROM-filter components is able to transform XML data from multiple ROM
modules into a new ROM module. It is prominently used to generate component
configurations depending on global system state. The current release makes
this tool more flexible by allowing verbatim copies of input content into
the output XML node as well as the use of input content as attribute values.


New user-input processing capabilities
======================================

In [https://genode.org/documentation/release-notes/17.02#Input-event_filter - version 17.02],
we introduced a modular input-processing component called _input-filter_.
The current release adds the following features to this component:

:incorporating modifier state from external ROMs:

  By adding a '<rom name="...">' node into '<modN>' node of a chargen-filter,
  it is now possible to incorporate the content of the given ROM module into
  the modifier state. If the ROM module contains a top-level node with the
  attribute 'enabled' set to "yes", the modifier is enabled. This is useful
  for handling a system-global capslock state.

:scroll-wheel emulation:

  The new '<button-scroll>' filter turns relative motion events into wheel
  events while a special button (i.e., the middle mouse button) is pressed.
  The button and rate of generated wheel events can be configured per axis via
  the sub nodes '<vertical>' and '<horizontal>'. The button of each axis can
  be specified via the 'button' attribute. By default, "BTN_MIDDLE" is used.
  The rate of generated wheel events can be defined by the 'speed_percent'
  attribute. A value of "100" uses relative motion vectors directly as wheel
  motion vectors. In practice, this is results in overly fast wheel motion. By
  lowering the value, the rate can be reduced to practical levels. By
  specifying a negative value, the direction of the generated wheel motion can
  be inverted.

  The consumed relative motion events are filtered out from the event stream
  such that pointer movements are inhibited while the wheel emulation is
  active. All other events are passed along unmodified.

:pointer acceleration:

  The new '<accelerate>' filter applies acceleration to relative motion
  values. The 'max' attribute defines the maximum value added to the incoming
  motion values. The 'sensitivity_percent' attribute scales incoming motion
  values before applying the (potentially non-linear) acceleration function.
  The 'curve' attribute defines the degree of non-linearity of the
  acceleration. The value "0" corresponds to a linear function whereas the
  maximum value "255" applies a curved function. The default value is "127".


Keyboard-LED support for PS/2 and USB HID
=========================================

Both the PS/2 and the USB drivers have gained the new '<config>' attributes
'capslock_led="no"', 'numlock_led="no"', and 'scrlock_led="no"' (with their
default values shown). The attributes can have the values "no" (LED is turned
off), "yes" (LED is turned on), or "rom". In the latter case, the driver reads
the LED state from a dedicated ROM module called "capslock", "numlock", or
"scrlock" respectively. The ROM module is expected to have a top-level XML
node with the attribute 'enabled' set to "yes" or "no". The drivers reflect
this state information by driving the corresponding keyboard-mode indicator
LEDs.


Revised nitpicker GUI server
============================

Driven by use cases like the "sculpt" scenario mentioned in the introduction,
the nitpicker GUI server and its helper components received an overhaul.

Besides modernizing the implementation according to our today's best
practices, we succeeded in removing the focus handling as the last remaining
builtin policy from the GUI server to an external component, thereby making
the GUI server much more flexible. This line of work is complemented with
an improved way of supporting client-provided pointer shapes, and a new
general component for handling global keys.


Supplementing user-activity information to the hover report
-----------------------------------------------------------

Nitpicker's existing "hover" report features the information of the
currently hovered client (e.g., the client's label and domain). In the
new version, the report also features the information whether or not the
user has actively moved the pointer during the last half second. This is
analogously to how the "focus" report features user-activity information
about recent key press/release activity. When combined the "hover" and "focus"
reports provide a way to detect the absence of user activity, e.g., to
implement a lock screen or screen saver. If both reports have no 'active'
attribute, such a component can schedule a timer. Whenever either of both
reports shows an 'active' attribute, the timer is reset. The lock screen
becomes active once the timeout triggers.


Key-state reporting
-------------------

For debugging purposes or for implementing global key combinations,
nitpicker now offers "keystate" reports. The report is update each time,
the user presses or releases a key. It list all currently pressed keys
along with the key count as observed by nitpicker.


Report last clicked-on client
-----------------------------

The new 'clicked' report features the information about the client, on which
the user actively clicked. It is useful to implement a click-to-focus policy
outside of nitpicker.


Externalizing nitpicker's focus policy
--------------------------------------

Traditionally, nitpicker had a builtin policy about the input focus, which
ensured that only the user can change the focus. The input focus is changed
whenever the user clicks on an unfocused view. If permitted by the policy of
the domain, the clicked-on client receives the focus. The policy configuration
allows one to define domains that never receive any focus, domains that
receive the focus only temporarily while the button is kept pressed (the
so-called "transient focus"), or domains that can receive the regular input
focus.

However, there are situations where this builtin policy stands in the way.
For example, in a scenario based on virtual consoles, the user wants to
be able to switch virtual consoles via keyboard shortcuts and expects the
input focus to match the currently visible console. Another example is the
change of the input focus via key combinations like alt-tab.

As an alternative to the builtin policy, the new version of nitpicker is
able to respond to an externally provided "focus" state in the form of
a ROM session. This state is driven by a dedicated component, like the
new _nit_focus_ component that implements the traditional click-to-focus
policy. By supplying the focus as a ROM session to nitpicker, it become
easy to globally override the focus if needed. One particular example is
a lock screen that should capture the focus when becoming active, or
yield the focus to the original owner when becoming inactive.

The new explicit focus handling can be activated by setting the '<config>'
attribute 'focus' to the value "rom". Further down the road, we plan to
make this option the default, with the goal to ultimately remove the
original builtin policy.


Generalized global-key handling
-------------------------------

The new _global_keys_handler_ component replaces the former _xray-trigger_
component. It transforms a stream of nitpicker input events to state reports.
The states and the ways of how the user input affects the states is
configurable. Examples for such states are the system-global capslock and
numlock states, or the nitpicker X-ray mode activated by a global
secure-attention key. The configuration looks as follows:

! <config>
!   <bool name="xray" initial="no"/>
!
!   <press   name="KEY_F1" bool="xray" change="on"/>
!   <release name="KEY_F1" bool="xray" change="off"/>
!   <press   name="KEY_F2" bool="xray" change="toggle"/>
!
!   <report name="xray" delay_ms="125">
!     <hovered domain="panel"/>
!     <bool name="xray"/>
!   </report>
! </config>

A '<bool>' node declares a boolean state variable with the given name and its
initial value (default is "no"). There may by any number of such variables.

The '<press>' and '<release>' nodes define how key events affect the state
variables. Each of those nodes refers to a specific state variable via the
'bool' attribute, and the operation as the 'change' attribute. Possible
'change' attribute values are "on", "off", and "toggle".

The '<report>' node defines a state-dependent report with the name as
specified in the 'name' attribute. The report-generation rate can be
artificially limited by the 'delay_ms' attribute. If specified, the report is
not issued immediately on a state change but after the specified amount of
milliseconds. The '<report>' node contains a number of conditions. Whenever
one of those conditions is true, a report of the following form is generated:

! <xray enabled="yes"/>

Otherwise, the report's 'enabled' attribute has the value "no". Possible
conditions are '<bool>' and '<hovered>'. The '<bool>' condition is true if the
named boolean state variable has the value true. The '<hovered>' condition is
true if the currently hovered nitpicker client belongs to the domain as
specified in the 'domain' attribute. The latter information is obtained from a
ROM module named "hover", which corresponds to nitpicker's hover reports.

To use the global-keys-handler in practice, one needs to configure the
nitpicker GUI server such that the press/release events of the global keys of
interest are routed to the global-keys-handler. This can be achieved by
nitpicker's '<global-key>' configuration nodes. For example:

! <global-key name="KEY_F1" label="global_keys_handler -> input" />
! <global-key name="KEY_F2" label="global_keys_handler -> input" />


More flexible geometry definitions of nit_fb instances
------------------------------------------------------

The _nit_fb_ component translates the nitpicker session interface into the
low-level input and framebuffer session interfaces such that raw framebuffer
clients can be hosted as nitpicker applications. The position and size of such
an application is configurable.

The new 'origin' attribute denotes the coordinate origin of the values
specified in the 'xpos' and 'ypos' attributes. Supported origins are
"top_left", "top_right", "bottom_left", and "bottom_right". This attribute
allows one to align the nitpicker view at any of the four screen boundaries.

The 'width' and 'height' attribute values can now be negative. If so, they are
relative to the physical screen size. E.g., when using a screen size of
640x480, the effective width for a 'width' attribute value of "-100" would be
640 - 100 = 540.


Simplified handling of client-provided pointer shapes
-----------------------------------------------------

The _pointer_ component that accompanies nitpicker by default shows a static
pointer shape only. In advanced scenarios, for example when multiple instances
of VirtualBox are present on one screen, it is desired to show the shape
provided by the currently hovered guest OS. This was accomplished by a
special _vbox_pointer_ component with access to both, the client-provided
shapes and nitpicker's hover report. Whereas this component sufficed for the
relatively static scenarios, the pointer's policy configuration becomes rather
difficult in dynamic scenarios where the labels of the displayed VMs or
applications are unknown at system-integration time.

The new version simplifies the shape handling by letting the pointer component
play the role of a "Report" service that consumes "shape" reports. This way,
the pointer implicitly knowns the label of the shape-providing client. It
matches the labels of its report clients against the currently hovered client
as obtained from nitpicker's hover report. If there is a match, the pointer
displays the matching client-provided shape. Since the new component is
generically applicable, e.g., not only for VirtualBox-provided shapes but also
for Qt5-provided shapes, it has become nitpicker's default pointer component.


USB-driver support for RNDIS
============================

; @senier

commit 50ec5c03c1bf254f02a656c250d2a4d9b4f24405
Author: Alexander Senier <senier@componolit.com>
Date:   Mon Oct 16 21:47:40 2017 +0200

    dde_linux/usb: Support CDC Ethernet

commit f15e8fec8f71880930feb15d8bf7d812f73f108b
Author: Alexander Senier <senier@componolit.com>
Date:   Wed Oct 18 14:01:12 2017 +0200

    dde_linux/usb: Add RNDIS driver

; thanks to Alexander Senier


Refined Rump-kernel-based file-system support
=============================================

We extended the 'rump_fs' file system server with the ability to mount and
unmount the underlying file system on demand. It will now mount the file system
on the first established session request and in return will unmount the file
system whenever the last session is closed. In case all clients are shut down
before the server is stopped this prevents leaving the file system marked as
dirty. Even if the file system itself is in a clean state, the dirty bit might
trigger a false negative result when performing a file system check.

In release [http://genode.org/documentation/release-notes/14.02 - 14.02] we
added a e2fsprogs Noux port. Since the use of the VFS library in the libc Noux
is not strictly needed anymore for running tools like the e2fsprogs utilities.
On the contrary, it increases the complexity of a file system managment
mechanism needlessly. We this release we introduce a port of the 'e2fsck' tool
from e2fsprogs to Genode that does not depend on Noux. It can be used by a
management component to check a file system prior to starting 'rump_fs' and
in case of errors to attempt to fix them automatically.


Runtime environments and programming languages
##############################################

Genode components based on the Nim language
===========================================

; @emery

commit b20b14de2721c3bb8b6781b2d6e3f210879b64d5
Author: Emery Hemingway <emery@vfemail.net>
Date:   Wed Sep 6 09:43:48 2017 -0500

    support for Nim {.compile.} pragma for C sources
    
    Inject bundled C files into build recipes with the Nim {.compile.}
    pragma.
    
    Fix #2516

commit 419e7b99e4dc7fd62b9b3e05e4a6028d9192dc10
Author: Emery Hemingway <emery@vfemail.net>
Date:   Thu Sep 28 09:15:24 2017 -0500

    Enforce use of a custom Nim compiler
    
    Use a custom Nim compiler at '/usr/local/genode-nim' that can be built
    with a makefile at 'tool/tool_chain_nim'.
    
    Fix #2545


GDB-based debugging of server components
========================================

; @cproc

commit 0fd4649a7c5ed05d6d6ebc51be066735a8dc2a87
Author: Christian Prochaska <christian.prochaska@genode-labs.com>
Date:   Mon Nov 13 16:25:45 2017 +0100

    gdb_monitor: handle session requests for child services
    
    Fixes #2574


Applications and libraries
##########################

Displaying of Qt5's custom pointer shapes
=========================================

; @cproc

commit 2c1acd8ee245b50e3eb3226826205c6d444a4cbb
Author: Christian Prochaska <christian.prochaska@genode-labs.com>
Date:   Fri Nov 24 20:23:45 2017 +0100

    qt5: pointer shape support
    
    Fixes #2586


Qt5-based virtual keyboard
==========================

; @chelmuth

commit b0187ddc28471bdad042d78c38bd5bf5019297ea
Author: Johannes Kliemann <jk@jkliemann.de>
Date:   Mon Aug 14 11:14:43 2017 +0200

    qt5: setup QPlatformInputContext on nitpicker
    
    Issue #2496
    Fixes #2495

commit 6cbf54aefb94fc85c26269ab85c2a93a79798897
Author: Johannes Kliemann <jk@jkliemann.de>
Date:   Wed Jul 26 14:46:22 2017 +0200

    qt5: example of qtvirtualkeyboard
    
    Fixes #2496

; thanks to Johannes Kliemann


Resizable libSDL-based applications like avplay
===============================================

There are quite a few ports of SDL-based software available on Genode that work
well when executed in isolation, e.g., a game running in fullscreen directly on
the framebuffer. However, when running in a common desktop scenario, the fixed
size of the framebuffer used in Genode's SDL video subsystem backend is a
noticeable limitation. So, in addition to removing the usage of deprecated APIs
in the SDL back ends, we lifted this limitation as well.

Removing the usage of the deprecated APIs, which rely on a global environment,
lead to adding a Genode specific initialization function 'sdl_init_genode' that
has to be called prior to calling 'SDL_Init'. For that purpose we introduce a
stub library 'sdlmain'. In accordance to the posix library, it handles
commandline argument parsing, properly initializing SDL and calling the SDL
programs 'main' function. For interacting with the Genode API, we might have to
execute Signal_handlers, e.g., whenever a framebuffer mode change signal is
received. This is compilicated from within a thread that is running libc code,
which is true for most if not all SDL-based components. Therefor and because
those components come with their own event loop that polls SDL for events, we
start the 'main' function in its own thread. The main entrypoint of the
component does all the signal handling and the dispatcher flag signals in a way
that SDL can transform them into SDL_Events and inject them into the event loop.

This changes enable the seamless resizing of a running avplay instance.


Resizable PDF viewer based on mypdf
===================================

; @emery

commit 040e331f773604502faf466c7f01b1b06745a9b9
Author: Norman Feske <norman.feske@genode-labs.com>
Date:   Wed Jul 8 18:38:54 2015 +0200

    mupdf: support resizeable framebuffers

commit 979b6bccd441770add2bd9c33251c5313ffaace7
Author: Emery Hemingway <emery@vfemail.net>
Date:   Fri Nov 17 00:50:51 2017 -0600

    Rename app/mupdf to app/pdf_view, create depot recipes
    
    The name 'mupdf' is both the name of a library and a component, thus
    preventing a depot recipes for both the shared library and component.
    
    Fix #2582


Platforms
#########

UEFI boot, consistent use of GRUB2 on x86
=========================================

With the previous release, we already added support for GRUB2 when booted in
UEFI mode. Still, for non-UEFI boots we used as boot-loaders GRUB-0.97 and
ISOLINUX from the Syslinux Project.

With the gained experience of GRUB2 we decided to modernize our bootloader
chain for x86.  With this release we use for all x86 boots solely GRUB2.
For the ISO creation we now leverage the images as shipped of GRUB2,
'embedded.img' and 'eltorito.img', together with the 'xorriso' tool. Due to
this change we were able to remove the ISOLINUX binaries and eltorito files
of GRUB1.

The final GRUB2 binaries are now integrated as external Genode port, which
can be installed by invoking:

! tool/ports/prepare_port grub2

The grub2 port contains the GRUB2 binaries. Additionally the port contains
the instruction and the references to the git source code of GRUB2 used to
generate the bootloader binaries. With the provided information in the port
one can re-produce the GRUB2 builds if desired.

Enabling MMU-based threat mitigations by default
================================================

With this release we enabled support to leverage non-executable memory for
Genode. On hardware and kernels supporting this feature, it now got enabled by
default.

On ARM this feature is available to all supported kernels, namely our own
hw kernel, seL4 and Fiasco.OC.

On x86 the 64bit kernels hw, NOVA and Fiasco.OC support this feature.

seL4 in general misses currenlty support for it on x86. The remaining supported
x86 32bit kernels - OKL4, Pistachio and Fiasco - don't provide support, since
they are not runing the MMU with pagetable in the so called PAE
(physical address extensdion) format. With the introduction of PAE also the
non-executable memory support feature got added to x86.

Updated seL4 to kernel branch 7.0
=================================

In the last releases we extended our seL4 support and thereby collected a
bunch of patches to the seL4 kernel, e.g. UEFI boot support. We reported the
patches to the seL4 developers which integrated most of our changes into the
seL4 7.0 kernel release.

Additionally to the update we extended the UEFI framebuffer support for the
seL4 kernel, so that our simple boot framebuffer driver may now utilize the
graphic device if setup by GRUB2 during UEFI boot. The patches to the kernel
got submitted to the seL4 maintaines for review and for inclusion.

Execution on bare hardware (base-hw)
====================================

; @skalk

commit 42db1e112bccdc5797100411f7da97d46eca4f86
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Tue Jun 20 15:25:04 2017 +0200

    hw: introduce kernel/user address space split
    
    * introduces central memory map for core/kernel
    * on 32-bit platforms the kernel/core starts at 0x80000000
    * on 64-bit platforms the kernel/core starts at 0xffffffc000000000
    * mark kernel/core mappings as global ones (tagged TLB)
    * move the exception vector to begin of core's binary,
      thereby bootstrap knows from where to map it appropriately
    * do not map boot modules into core anymore
    * constrain core's virtual heap memory area
    * differentiate in between user's and core's main thread's UTCB,
      which now resides inside the kernel segment
    
    Ref #2091

commit 7e47fa58b325fcf1752fd1a4cfc4c0169ef42fcf
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Wed Aug 30 11:34:21 2017 +0200

    hw: use x86 exception stack unconditionally
    
    Always switch to the "exception stack" instead of having a hardware initiated
    stack switch during exceptions/interrupts when the privilege level changes only.
    Moreover, this commit increases the exception stack slightly.
    
    Ref #2091

commit ca60e24ad98648e140e0550e4da32f2119bf6810
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Wed Aug 30 11:59:35 2017 +0200

    hw: run core threads in privileged mode
    
    * introduce new syscall (core-only) to create privileged threads
    * take the privilege level of the thread into account
      when doing a context switch
    * map kernel segment as accessable for privileged code only
    
    Ref #2091

commit 4e97a6511b9b20846cf6afc4007791d998d6c8f6
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Fri Jun 30 12:00:27 2017 +0200

    hw: switch page-tables only when necessary
    
    * Instead of always re-load page-tables when a thread context is switched
      only do this when another user PD's thread is the next target,
      core-threads are always executed within the last PD's page-table set
    * remove the concept of the mode transition
    * instead map the exception vector once in bootstrap code into kernel's
      memory segment
    * when a new page directory is constructed for a user PD, copy over the
      top-level kernel segment entries on RISCV and X86, on ARM we use a designated
      page directory register for the kernel segment
    * transfer the current CPU id from bootstrap to core/kernel in a register
      to ease first stack address calculation
    * align cpu context member of threads and vms, because of x86 constraints
      regarding the stack-pointer loading
    * introduce Align_at template for members with alignment constraints
    * let the x86 hardware do part of the context saving in ISS, by passing
      the thread context into the TSS before leaving to user-land
    * use one exception vector for all ARM platforms including Arm_v6
    
    Fix #2091

commit 0635d5fffb8d95a76f8490122aecc270d6e7c6be
Author: Stefan Kalkowski <stefan.kalkowski@genode-labs.com>
Date:   Thu Oct 5 16:11:24 2017 +0200

    hw: turn Cpu_idle into a Thread
    
    Fix #2539

commit 0f9801d1f03d6bfd37b8320641d0cf43e5c822ae
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Sat Nov 18 15:22:22 2017 +0100

    hw: evaluate also ACPI RSDP v1 with MBI2
    
    Issue #2526

commit a620561d6248749de5530be0734ec2aefe588f7d
Author: Alexander Boettcher <alexander.boettcher@genode-labs.com>
Date:   Sat Nov 18 15:53:02 2017 +0100

    hw: add mbi2 framebuffer support
    
    Issue #2555


Improved offline validation of Genode configurations
====================================================

Genode's configuration is based on XML and gets validated by xmllint during
each run tool invocation. Up to now we used xmllint mainly to check for
a valid XML syntax.

With this release we added for Genode's 'init' component additionally a
semantically check, whether the XML nodes and attributes are known and
understood by 'init'. This check is performed now on
each run tool invocation at integration time. The XML schema file is located in

! tool/run/genode.xsd

and gets applied by xmllint.
